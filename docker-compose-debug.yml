version: '3.7'

# Only use this stack for development or debugging,
# A WSGI stack should be used for production (docker-compose.yml)
services:
  web:
    image: nielsbohr/nbi-projects-site:edge
    container_name: nbi-projects-site
    environment:
      FLASK_DEBUG: 1
    ports:
      - "80:80/tcp"
    volumes:
      - ./persistence:/var/nbi-projects-site/persistence:rw
      - ./res:/var/nbi-projects-site/res:ro
      - ./res/projects-envvars.py:/etc/projects/projects-envvars.py:ro
    command: python3 /var/nbi-projects-site/run.py --debug --port 80
